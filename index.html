<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental For You - ‡πÄ‡∏ä‡πà‡∏≤‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root{--cream:#FAF7F2;--cream-dark:#F0EBE3;--brown:#5D4E37;--brown-light:#8B7355;--pink:#E8D5D5;--pink-soft:#F5EDED;--gold:#C9A962;--white:#FFFFFF;--shadow:rgba(93,78,55,0.1);--red:#E57373;--line-green:#06C755}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Prompt',sans-serif;background:linear-gradient(135deg,var(--cream) 0%,var(--pink-soft) 50%,var(--cream-dark) 100%);min-height:100vh;color:var(--brown)}
        .header{background:var(--white);padding:15px 20px;position:sticky;top:0;z-index:100;box-shadow:0 2px 20px var(--shadow)}
        .header-content{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
        .logo{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:600;color:var(--brown)}
        .logo img{height:50px}
        .logo span{color:var(--gold)}
        .nav-tabs{display:flex;gap:10px}
        .nav-tab{padding:10px 20px;border:none;background:var(--cream);color:var(--brown);border-radius:25px;cursor:pointer;font-family:'Prompt',sans-serif;font-size:0.9rem;font-weight:500;transition:all 0.3s}
        .nav-tab:hover{background:var(--pink-soft)}
        .nav-tab.active{background:var(--brown);color:var(--white)}
        .container{max-width:1200px;margin:0 auto;padding:20px}
        .page{display:none}
        .page.active{display:block;animation:fadeIn 0.3s}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        .filter-section{background:var(--white);padding:20px;border-radius:16px;margin-bottom:20px;box-shadow:0 4px 20px var(--shadow)}
        .filter-title{font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--brown)}
        .filter-row{display:flex;gap:15px;flex-wrap:wrap}
        .filter-group{flex:1;min-width:150px}
        .filter-label{font-size:0.8rem;color:var(--brown-light);margin-bottom:5px;display:block}
        .filter-select,.filter-input{width:100%;padding:10px 15px;border:2px solid var(--cream-dark);border-radius:10px;font-family:'Prompt',sans-serif;font-size:0.9rem;color:var(--brown);background:var(--white)}
        .filter-select:focus,.filter-input:focus{outline:none;border-color:var(--gold)}
        .dress-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}
        .dress-card{background:var(--white);border-radius:16px;overflow:hidden;box-shadow:0 4px 20px var(--shadow);transition:all 0.3s;cursor:pointer}
        .dress-card:hover{transform:translateY(-5px);box-shadow:0 8px 30px var(--shadow)}
        .dress-image-wrapper{width:100%;padding-top:100%;position:relative;background:var(--cream)}
        .dress-image{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}
        .dress-card-info{padding:15px}
        .dress-card-name{font-family:'Playfair Display',serif;font-size:1.1rem;font-weight:600;color:var(--brown);margin-bottom:5px}
        .dress-card-brand{font-size:0.8rem;color:var(--brown-light);margin-bottom:10px}
        .dress-card-price{display:flex;justify-content:space-between;align-items:center}
        .price-badge{background:var(--cream);padding:5px 12px;border-radius:15px;font-size:0.85rem;color:var(--brown)}
        .price-badge span{font-weight:600;color:var(--gold)}
        .view-btn{background:var(--brown);color:var(--white);border:none;padding:8px 15px;border-radius:20px;font-size:0.85rem;cursor:pointer;transition:all 0.3s}
        .view-btn:hover{background:var(--gold)}
        .modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:200;justify-content:center;align-items:center;padding:20px;overflow-y:auto}
        .modal-overlay.show{display:flex}
        .modal{background:var(--white);border-radius:20px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;animation:modalIn 0.3s;margin:auto}
        @keyframes modalIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}
        .modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--cream-dark);position:sticky;top:0;background:var(--white);z-index:10}
        .modal-title{font-family:'Playfair Display',serif;font-size:1.3rem;color:var(--brown)}
        .modal-close{background:none;border:none;font-size:1.5rem;color:var(--brown-light);cursor:pointer}
        .modal-body{padding:20px}
        .modal-image-wrapper{width:100%;padding-top:100%;position:relative;border-radius:12px;overflow:hidden;margin-bottom:20px;background:var(--cream)}
        .modal-image{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}
        .modal-info{margin-bottom:20px}
        .modal-info-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--cream)}
        .modal-info-label{color:var(--brown-light)}
        .modal-info-value{font-weight:600;color:var(--brown)}
        .modal-prices{display:flex;justify-content:space-around;background:var(--cream);padding:15px;border-radius:12px;margin-bottom:20px}
        .modal-price-item{text-align:center}
        .modal-price-item.highlight{background:var(--gold);padding:10px 15px;border-radius:10px}
        .modal-price-item.highlight .modal-price-day,.modal-price-item.highlight .modal-price-value{color:var(--white)}
        .modal-price-day{font-size:0.8rem;color:var(--brown-light)}
        .modal-price-value{font-size:1.2rem;font-weight:600;color:var(--gold)}
        .calendar-section{margin-top:20px}
        .section-title{font-size:1rem;font-weight:600;color:var(--brown);margin-bottom:15px}
        .calendar-header-nav{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
        .calendar-nav-btn{width:35px;height:35px;border:none;background:var(--cream);border-radius:50%;cursor:pointer;font-size:1rem;color:var(--brown)}
        .calendar-nav-btn:hover{background:var(--gold);color:var(--white)}
        .calendar-month{font-weight:600;color:var(--brown)}
        .calendar{background:var(--cream);border-radius:12px;overflow:hidden}
        .calendar-header{display:grid;grid-template-columns:repeat(7,1fr);background:var(--brown);color:var(--white)}
        .calendar-header span{padding:10px 5px;text-align:center;font-size:0.75rem}
        .calendar-body{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;padding:8px}
        .calendar-day{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:0.85rem;border-radius:6px;background:var(--white)}
        .calendar-day.empty{background:transparent}
        .calendar-day.available{color:var(--brown)}
        .calendar-day.booked{background:var(--red);color:var(--white)}
        .calendar-day.past{color:#CCC;background:#F5F5F5}
        .calendar-day.today{border:2px solid var(--gold)}
        .calendar-legend{display:flex;justify-content:center;gap:20px;margin-top:10px;font-size:0.8rem}
        .legend-item{display:flex;align-items:center;gap:5px}
        .legend-dot{width:12px;height:12px;border-radius:3px}
        .legend-dot.available{background:var(--white);border:1px solid var(--cream-dark)}
        .legend-dot.booked{background:var(--red)}
        .btn-line{width:100%;padding:15px;background:var(--line-green);color:var(--white);border:none;border-radius:12px;font-family:'Prompt',sans-serif;font-size:1rem;font-weight:600;cursor:pointer;margin-top:20px;display:flex;align-items:center;justify-content:center;gap:10px;text-decoration:none;transition:all 0.3s}
        .btn-line:hover{opacity:0.9;transform:translateY(-2px)}
        .check-queue-card{background:var(--white);border-radius:20px;padding:30px;max-width:500px;margin:0 auto;box-shadow:0 10px 40px var(--shadow)}
        .page-title{font-family:'Playfair Display',serif;font-size:1.5rem;text-align:center;margin-bottom:25px;color:var(--brown)}
        .input-group{margin-bottom:20px}
        .input-label{display:block;font-size:0.9rem;font-weight:500;margin-bottom:8px;color:var(--brown)}
        .input-field{width:100%;padding:15px;font-family:'Prompt',sans-serif;font-size:1rem;border:2px solid var(--cream-dark);border-radius:12px;text-align:center;text-transform:uppercase;letter-spacing:2px}
        .input-field:focus{outline:none;border-color:var(--gold)}
        .check-btn{width:100%;padding:15px;background:linear-gradient(135deg,var(--brown) 0%,var(--brown-light) 100%);color:var(--white);border:none;border-radius:12px;font-family:'Prompt',sans-serif;font-size:1rem;font-weight:600;cursor:pointer}
        .check-btn:hover{transform:translateY(-2px)}
        .loading{display:none;text-align:center;padding:40px}
        .loading.show{display:block}
        .spinner{width:40px;height:40px;border:3px solid var(--cream-dark);border-top-color:var(--gold);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px}
        @keyframes spin{to{transform:rotate(360deg)}}
        .footer{text-align:center;padding:30px;color:var(--brown-light);font-size:0.85rem}
        @media (max-width:768px){
            .header-content{flex-direction:column;gap:15px}
            .nav-tabs{width:100%;justify-content:center;flex-wrap:wrap}
            .dress-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px}
            .filter-row{flex-direction:column}
            .filter-group{min-width:100%}
            .modal{margin:20px 10px;max-width:100%}
            .modal-prices{flex-direction:column;gap:10px}
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <span>Rental</span> For You
            </div>
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showPage('browse',this)">üõçÔ∏è ‡πÄ‡∏ä‡πà‡∏≤‡∏ä‡∏∏‡∏î</button>
                <button class="nav-tab" onclick="showPage('check',this)">üìã ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏¥‡∏ß</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="browsePage" class="page active">
            <div class="filter-section">
                <div class="filter-title">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</label>
                        <input type="text" class="filter-input" id="searchInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡∏∏‡∏î, ‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏∏‡∏î..." onkeyup="applyFilters()">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</label>
                        <select class="filter-select" id="brandFilter" onchange="applyFilters()">
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Size</label>
                        <select class="filter-select" id="sizeFilter" onchange="applyFilters()">
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="dress-grid" id="dressGrid"></div>
        </div>

        <div id="checkPage" class="page">
            <div class="check-queue-card">
                <h2 class="page-title">üìã ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h2>
                <div class="input-group">
                    <label class="input-label">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏∏‡∏î</label>
                    <input type="text" class="input-field" id="dressCodeInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô D001">
                </div>
                <button class="check-btn" onclick="checkQueue()">‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏á</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="dressModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle"></div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <div class="footer">
        ¬© 2026 Rental For You | ‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏• ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡πÇ‡∏≠‡∏Å‡∏≤‡∏™
    </div>

    <script>
        const API='https://script.google.com/macros/s/AKfycbzD28xXgbsa8sQ4kFwW5ap1bQb_CFN5rPtFTtzEWxSkoMVJlzCyo8VvtCUUdmYerKNZ/exec';
        const LINE='https://line.me/R/ti/p/@897pymlg';
        
        // ‚≠ê ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å folder images/ ‡πÉ‡∏ô Netlify
        const IMG_PATH = 'images/'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô '' ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà root
        
        let dresses=[];
        let filtered=[];
        let current=null;
        let booked=[];
        let month=new Date().getMonth();
        let year=new Date().getFullYear();
        
        async function load(){
            try{
                const r=await fetch(API+'?action=list');
                const d=await r.json();
                if(d.success){
                    dresses=d.data;
                    filtered=dresses;
                    populateFilters();
                    renderDresses();
                }
            }catch(e){console.error(e)}
        }
        
        function populateFilters(){
            const brands=new Set();
            const sizes=new Set();
            dresses.forEach(d=>{
                if(d.brand)brands.add(d.brand);
                if(d.size)sizes.add(d.size);
            });
            const bf=document.getElementById('brandFilter');
            const sf=document.getElementById('sizeFilter');
            brands.forEach(b=>bf.add(new Option(b,b)));
            sizes.forEach(s=>sf.add(new Option(s,s)));
        }
        
        function applyFilters(){
            const s=document.getElementById('searchInput').value.toLowerCase();
            const b=document.getElementById('brandFilter').value;
            const sz=document.getElementById('sizeFilter').value;
            filtered=dresses.filter(d=>{
                const matchSearch=!s||(d.name||'').toLowerCase().includes(s)||(d.code||'').toLowerCase().includes(s);
                const matchBrand=!b||d.brand===b;
                const matchSize=!sz||d.size===sz;
                return matchSearch&&matchBrand&&matchSize;
            });
            renderDresses();
        }
        
        function renderDresses(){
            const g=document.getElementById('dressGrid');
            if(!filtered.length){
                g.innerHTML='<p style="grid-column:1/-1;text-align:center;padding:40px;color:var(--brown-light)">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>';
                return;
            }
            g.innerHTML=filtered.map(d=>`
                <div class="dress-card" onclick="openModal('${d.code}')">
                    <div class="dress-image-wrapper">
                        <img class="dress-image" src="${IMG_PATH}${d.code}.jpg" 
                             alt="${d.name}" 
                             onerror="this.src='${IMG_PATH}placeholder.jpg'">
                    </div>
                    <div class="dress-card-info">
                        <div class="dress-card-name">${d.name}</div>
                        <div class="dress-card-brand">${d.brand||''}</div>
                        <div class="dress-card-price">
                            <div class="price-badge">3‡∏ß‡∏±‡∏ô <span>${d.price3}‡∏ø</span></div>
                            <button class="view-btn">‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        async function openModal(code){
            current=dresses.find(d=>d.code===code);
            if(!current)return;
            document.getElementById('modalTitle').textContent=current.name;
            document.getElementById('dressModal').classList.add('show');
            document.body.style.overflow='hidden';
            month=new Date().getMonth();
            year=new Date().getFullYear();
            await fetchBooked(code);
            renderModal();
        }
        
        async function fetchBooked(code){
            try{
                const r=await fetch(API+'?action=check&code='+code);
                const d=await r.json();
                if(d.success)booked=d.bookedDates||[];
            }catch(e){booked=[]}
        }
        
        function renderModal(){
            document.getElementById('modalBody').innerHTML=`
                <div class="modal-image-wrapper">
                    <img class="modal-image" 
                         src="${IMG_PATH}${current.code}.jpg" 
                         alt="${current.name}"
                         onerror="this.src='${IMG_PATH}placeholder.jpg'">
                </div>
                <div class="modal-info">
                    <div class="modal-info-row"><span class="modal-info-label">‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏∏‡∏î</span><span class="modal-info-value">${current.code}</span></div>
                    <div class="modal-info-row"><span class="modal-info-label">‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</span><span class="modal-info-value">${current.brand}</span></div>
                    <div class="modal-info-row"><span class="modal-info-label">Size</span><span class="modal-info-value">${current.size}</span></div>
                </div>
                <div class="modal-prices">
                    <div class="modal-price-item"><div class="modal-price-day">1 ‡∏ß‡∏±‡∏ô</div><div class="modal-price-value">${current.price1}‡∏ø</div></div>
                    <div class="modal-price-item highlight"><div class="modal-price-day">3 ‡∏ß‡∏±‡∏ô</div><div class="modal-price-value">${current.price3}‡∏ø</div></div>
                    <div class="modal-price-item"><div class="modal-price-day">5 ‡∏ß‡∏±‡∏ô</div><div class="modal-price-value">${current.price5}‡∏ø</div></div>
                </div>
                <div class="calendar-section">
                    <div class="section-title">üìÖ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏á</div>
                    <div class="calendar-header-nav">
                        <button class="calendar-nav-btn" onclick="changeMonth(-1)">‚Äπ</button>
                        <span class="calendar-month" id="calMonth"></span>
                        <button class="calendar-nav-btn" onclick="changeMonth(1)">‚Ä∫</button>
                    </div>
                    <div class="calendar">
                        <div class="calendar-header"><span>‡∏≠‡∏≤</span><span>‡∏à</span><span>‡∏≠</span><span>‡∏û</span><span>‡∏û‡∏§</span><span>‡∏®</span><span>‡∏™</span></div>
                        <div class="calendar-body" id="calBody"></div>
                    </div>
                    <div class="calendar-legend">
                        <div class="legend-item"><div class="legend-dot available"></div><span>‡∏ß‡πà‡∏≤‡∏á</span></div>
                        <div class="legend-item"><div class="legend-dot booked"></div><span>‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á</span></div>
                    </div>
                </div>
                <a href="${LINE}" target="_blank" class="btn-line">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg>
                    üí¨ ‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå‡∏à‡∏≠‡∏á‡∏ä‡∏∏‡∏î
                </a>
            `;
            renderCal();
        }
        
        function changeMonth(d){
            month+=d;
            if(month>11){month=0;year++}
            else if(month<0){month=11;year--}
            renderCal();
        }
        
        function renderCal(){
            const m=['‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°','‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå','‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°','‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô','‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°','‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô','‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°','‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°','‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô','‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°','‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô','‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'];
            document.getElementById('calMonth').textContent=m[month]+' '+(year+543);
            const b=document.getElementById('calBody');
            b.innerHTML='';
            const today=new Date();today.setHours(0,0,0,0);
            const first=new Date(year,month,1);
            const last=new Date(year,month+1,0);
            for(let i=0;i<first.getDay();i++){const e=document.createElement('div');e.className='calendar-day empty';b.appendChild(e)}
            for(let d=1;d<=last.getDate();d++){
                const el=document.createElement('div');
                el.className='calendar-day';
                el.textContent=d;
                const dt=new Date(year,month,d);
                const ds=fmt(dt);
                if(dt.getTime()===today.getTime())el.classList.add('today');
                if(dt<today)el.classList.add('past');
                else if(booked.includes(ds))el.classList.add('booked');
                else el.classList.add('available');
                b.appendChild(el);
            }
        }
        
        function closeModal(){document.getElementById('dressModal').classList.remove('show');document.body.style.overflow='auto'}
        
        function showPage(p,btn){
            document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.page').forEach(pg=>pg.classList.remove('active'));
            document.getElementById(p+'Page').classList.add('active');
        }
        
        function checkQueue(){
            const c=document.getElementById('dressCodeInput').value.trim().toUpperCase();
            if(!c){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏∏‡∏î');return}
            const d=dresses.find(x=>x.code===c);
            if(!d){alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ä‡∏∏‡∏î "'+c+'"');return}
            openModal(c);
        }
        
        document.getElementById('dressCodeInput')?.addEventListener('keypress',e=>{if(e.key==='Enter')checkQueue()});
        
        function fmt(d){return d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0')+'-'+String(d.getDate()).padStart(2,'0')}
        
        document.getElementById('dressModal').addEventListener('click',e=>{if(e.target.id==='dressModal')closeModal()});
        
        load();
    </script>
</body>
</html>
